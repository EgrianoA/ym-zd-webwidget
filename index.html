<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>ZE Widget</title>
</head>

<body>
    <script id="ze-snippet"
        src="https://static.zdassets.com/ekr/snippet.js?key=f2d80132-163c-4ad4-858f-960bf79afac9"></script>
    <script>
        zE('messenger', 'open');
        const urlParams = new URLSearchParams(window.location.search);
        const queryString = urlParams.get('key');
        console.log(queryString);
        if (queryString && queryString !== '') {
            zE('messenger', 'loginUser', function (callback) {
                callback(queryString);
            })
        }
        zE('messenger:on', 'close', () => {
            window.parent.postMessage(
                JSON.stringify({
                    event_code: "ym-client-event",
                    data: "Widget Closed"
                }), "*");
        });
    </script>
</body>

</html>
